<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>For You - Eternal Memories</title>
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@500;700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
  <style>
    *{margin:0;padding:0;box-sizing:border-box}
    body{
      font-family:'Poppins',sans-serif;
      background:radial-gradient(circle at top,#0f0c29,#302b63,#24243e);
      color:#f0f0f0;min-height:100vh;overflow-x:hidden;
      position:relative;}

    /* Stars Background */
    #stars {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 0;
      pointer-events: none;
    }
    
    .star {
      position: absolute;
      background: white;
      border-radius: 50%;
      animation: twinkle 3s infinite alternate;
    }
    
    @keyframes twinkle {
      0% { opacity: 0.2; }
      100% { opacity: 0.8; }
    }

    /* Falling Petals */
    #petals {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 1;
    }
    
    @keyframes fall {
      0% { transform: translateY(-50px) rotate(0deg); opacity: 1; }
      100% { transform: translateY(100vh) rotate(360deg); opacity: 0; }
    }

    /* Password Screen */
    #lock{
      position:fixed;inset:0;background:rgba(0,0,0,0.97);display:flex;
      align-items:center;justify-content:center;z-index:9999;
      backdrop-filter: blur(10px);}
    .lock-box{
      text-align:center;
      max-width:500px;
      padding:50px;
      background: linear-gradient(135deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05));
      border-radius: 25px;
      box-shadow: 0 25px 50px rgba(0, 0, 0, 0.7);
      border: 1px solid rgba(255, 255, 255, 0.15);}
    .lock-box h2{font-family:'Dancing Script',cursive;font-size:3rem;margin-bottom:15px;color:#ff9aa2;}
    .lock-box p{opacity:.8;margin-bottom:30px;font-size:1.2rem;line-height:1.5;}
    .lock-box input{
      width:100%;
      padding:18px;
      border-radius:15px;
      border:none;
      outline:none;
      background: rgba(255, 255, 255, 0.08);
      color: white;
      font-size: 1.1rem;
      border: 2px solid rgba(255, 255, 255, 0.2);
      transition: all 0.3s;}
    .lock-box input:focus {
      border-color: #ff9aa2;
      box-shadow: 0 0 20px rgba(255, 154, 162, 0.3);
    }
    .lock-box input::placeholder {color: rgba(255, 255, 255, 0.5);}
    .lock-box button{
      margin-top:25px;
      padding:15px 45px;
      border:none;
      border-radius:30px;
      cursor:pointer;
      background: linear-gradient(to right, #c77dff, #ff9aa2, #a0c4ff);
      color: white;
      font-weight: 600;
      font-size: 1.1rem;
      transition: all 0.3s ease;
      box-shadow: 0 10px 25px rgba(199, 125, 255, 0.5);}
    .lock-box button:hover {
      transform: translateY(-5px) scale(1.05);
      box-shadow: 0 15px 30px rgba(199, 125, 255, 0.7);
    }

    .container{
      max-width:1100px;
      margin:70px auto;
      padding:60px;
      background:rgba(255,255,255,.04);
      border-radius:30px;
      box-shadow:0 30px 70px rgba(0,0,0,.7);
      backdrop-filter: blur(15px);
      border: 1px solid rgba(255, 255, 255, 0.12);
      position: relative;
      z-index: 2;}
    
    header{text-align:center;margin-bottom:60px;}
    header h1{
      font-family:'Dancing Script',cursive;
      font-size:4.5rem;
      background: linear-gradient(to right, #ff9aa2, #c77dff, #a0c4ff, #ffd6a5);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      margin-bottom: 20px;
      text-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      animation: titleGlow 3s ease-in-out infinite alternate;}
    
    @keyframes titleGlow {
      0% { filter: drop-shadow(0 0 10px rgba(255, 154, 162, 0.3)); }
      100% { filter: drop-shadow(0 0 20px rgba(199, 125, 255, 0.5)); }
    }
    
    header p{
      opacity:.9;
      font-size: 1.3rem;
      letter-spacing: 1.5px;
      color: rgba(255, 255, 255, 0.8);}
    
    .reveal{
      opacity:0;
      transform:translateY(40px);
      transition:all 1.2s cubic-bezier(0.4, 0, 0.2, 1)}
    .reveal.active{
      opacity:1;
      transform:none}

    /* Image Gallery */
    .gallery {
      margin: 50px 0;
    }
    
    .gallery-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 20px;
      margin-top: 30px;
    }
    
    @media (max-width: 768px) {
      .gallery-grid {
        grid-template-columns: repeat(2, 1fr);
      }
    }
    
    @media (max-width: 480px) {
      .gallery-grid {
        grid-template-columns: 1fr;
      }
    }
    
    .gallery-item {
      position: relative;
      overflow: hidden;
      border-radius: 15px;
      cursor: pointer;
      transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
      height: 220px;
    }
    
    .gallery-item img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      filter: sepia(40%) brightness(0.9);
      transition: all 0.5s ease;
    }
    
    .gallery-item:hover {
      transform: translateY(-10px) scale(1.03);
      box-shadow: 0 25px 50px rgba(199, 125, 255, 0.4);
    }
    
    .gallery-item:hover img {
      filter: sepia(0%) brightness(1.1);
    }
    
    .caption {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      background: linear-gradient(transparent, rgba(0,0,0,0.8));
      color: white;
      padding: 15px;
      transform: translateY(100%);
      transition: transform 0.3s ease;
    }
    
    .gallery-item:hover .caption {
      transform: translateY(0);
    }

    /* Timeline */
    .timeline {
      margin: 60px 0;
      padding: 40px;
      background: rgba(255, 255, 255, 0.03);
      border-radius: 20px;
      border-left: 5px solid #a0c4ff;
    }
    
    .timeline h2 {
      text-align: center;
      color: #a0c4ff;
      margin-bottom: 40px;
      font-size: 2.5rem;
      font-family: 'Dancing Script', cursive;
    }
    
    .timeline-item {
      margin: 30px 0;
      padding: 20px;
      border-left: 3px solid #ff9aa2;
      background: rgba(255, 255, 255, 0.02);
      cursor: pointer;
      transition: all 0.4s ease;
      position: relative;
      border-radius: 0 10px 10px 0;
    }
    
    .timeline-item::before {
      content: '';
      position: absolute;
      left: -10px;
      top: 20px;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: #ff9aa2;
      box-shadow: 0 0 15px rgba(255, 154, 162, 0.5);
    }
    
    .timeline-item:hover {
      transform: translateX(15px);
      background: rgba(255, 154, 162, 0.1);
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
    }
    
    .date {
      color: #c77dff;
      font-weight: 600;
      font-size: 1.2rem;
      margin-bottom: 10px;
    }
    
    .timeline-content {
      color: rgba(255, 255, 255, 0.9);
      line-height: 1.7;
    }

    /* Memory Jar */
    .memory-jar {
      margin: 60px 0;
      padding: 40px;
      background: rgba(255, 255, 255, 0.03);
      border-radius: 20px;
      border: 2px dashed rgba(255, 154, 162, 0.3);
      min-height: 400px;
      position: relative;
      overflow: hidden;
    }
    
    .memory-jar h2 {
      text-align: center;
      color: #ffd6a5;
      margin-bottom: 20px;
      font-family: 'Dancing Script', cursive;
      font-size: 2.5rem;
    }
    
    .jar-container {
      min-height: 300px;
      position: relative;
      margin: 30px 0;
    }
    
    .memory-note {
      position: absolute;
      padding: 15px;
      border-radius: 10px;
      font-size: 0.95rem;
      cursor: move;
      max-width: 200px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
      transition: transform 0.3s;
    }
    
    .memory-note:hover {
      transform: scale(1.1) rotate(3deg);
      z-index: 100 !important;
    }
    
    .memory-input {
      display: flex;
      gap: 15px;
      margin-top: 30px;
    }
    
    .memory-input input {
      flex: 1;
      padding: 15px;
      border-radius: 10px;
      border: 2px solid rgba(255, 255, 255, 0.2);
      background: rgba(255, 255, 255, 0.05);
      color: white;
      font-size: 1rem;
    }
    
    .memory-input button {
      padding: 15px 30px;
      border: none;
      border-radius: 10px;
      background: linear-gradient(to right, #36d1dc, #5b86e5);
      color: white;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
    }
    
    .memory-input button:hover {
      transform: translateY(-3px);
      box-shadow: 0 10px 20px rgba(54, 209, 220, 0.4);
    }

    /* Voice Message */
    .voice-message {
      margin: 50px 0;
      padding: 30px;
      background: rgba(160, 196, 255, 0.1);
      border-radius: 20px;
      text-align: center;
    }
    
    .voice-player {
      margin-top: 30px;
    }
    
    .play-voice {
      padding: 20px 40px;
      background: linear-gradient(to right, #ff6b6b, #ff8e53);
      border: none;
      border-radius: 50px;
      color: white;
      font-size: 1.2rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 15px;
      margin: 0 auto;
    }
    
    .play-voice:hover {
      transform: scale(1.05);
      box-shadow: 0 15px 30px rgba(255, 107, 107, 0.4);
    }
    
    .waveform {
      display: flex;
      justify-content: center;
      gap: 5px;
      height: 60px;
      margin-top: 30px;
      align-items: flex-end;
    }
    
    .wave-bar {
      width: 8px;
      background: linear-gradient(to top, #ff6b6b, #ff8e53);
      border-radius: 4px;
      animation: wave 1s ease-in-out infinite alternate;
    }
    
    @keyframes wave {
      0% { height: 10px; }
      100% { height: 50px; }
    }

    /* Reactions */
    .reactions {
      margin: 50px 0;
      padding: 30px;
      background: rgba(255, 255, 255, 0.03);
      border-radius: 20px;
      text-align: center;
    }
    
    .reaction-buttons {
      display: flex;
      justify-content: center;
      gap: 15px;
      flex-wrap: wrap;
      margin-top: 20px;
    }
    
    .reaction-buttons button {
      padding: 12px 25px;
      border: 2px solid rgba(255, 255, 255, 0.2);
      background: rgba(255, 255, 255, 0.05);
      color: white;
      border-radius: 25px;
      cursor: pointer;
      transition: all 0.3s;
      font-size: 1.1rem;
    }
    
    .reaction-buttons button:hover {
      transform: translateY(-5px);
      border-color: #ff9aa2;
      background: rgba(255, 154, 162, 0.1);
      box-shadow: 0 10px 20px rgba(255, 154, 162, 0.2);
    }
    
    #reactionMessage {
      margin-top: 30px;
      min-height: 60px;
    }

    /* Letter Section */
    .letter{
      background: linear-gradient(135deg, rgba(0,0,0,0.4), rgba(0,0,0,0.2));
      padding:50px;
      border-radius:25px;
      margin-bottom: 40px;
      border-left: 8px solid #ff9aa2;
      position: relative;
      overflow: hidden;}
    
    .letter::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 100%;
      background: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%23ff9aa2' fill-opacity='0.05' fill-rule='evenodd'/%3E%3C/svg%3E");
      opacity: 0.3;
      pointer-events: none;
    }
    
    .letter h2{
      text-align:center;
      color:#ff9aa2;
      margin-bottom:35px;
      font-size: 3rem;
      font-family: 'Dancing Script', cursive;
      text-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);}
    .letter p{
      line-height:2;
      font-size:1.2rem;
      margin-bottom:25px;
      text-align: justify;
      position: relative;
      z-index: 1;}
    
    .signature {
      text-align: right;
      font-family: 'Dancing Script', cursive;
      font-size: 2.8rem;
      color: #a0c4ff;
      margin-top: 50px;
      position: relative;
      z-index: 1;
      text-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
    }

    .type{
      border-right:3px solid #ff9aa2;
      white-space:pre-line;
      overflow:hidden;
      min-height: 400px;
      padding-right: 15px;
      animation: blink 1s infinite;}
    
    @keyframes blink {
      0%, 100% { border-color: #ff9aa2; }
      50% { border-color: transparent; }
    }

    /* Music Player */
    .music-player {
      position: fixed;
      bottom: 30px;
      right: 30px;
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(15px);
      border-radius: 50px;
      padding: 12px 25px;
      display: flex;
      align-items: center;
      gap: 20px;
      z-index: 1000;
      border: 1px solid rgba(255, 255, 255, 0.2);
      box-shadow: 0 15px 35px rgba(0, 0, 0, 0.4);
      transition: all 0.3s;
    }
    
    .music-player:hover {
      transform: translateY(-5px);
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
    }
    
    .music-btn {
      background: rgba(255, 255, 255, 0.1);
      border: none;
      color: white;
      font-size: 1.3rem;
      cursor: pointer;
      width: 45px;
      height: 45px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
    }
    
    .music-btn:hover {
      background: rgba(255, 255, 255, 0.2);
      transform: scale(1.1);
    }

    /* Export Button */
    .export-btn {
      display: block;
      margin: 40px auto;
      padding: 18px 40px;
      background: linear-gradient(to right, #36d1dc, #5b86e5, #c77dff);
      border: none;
      border-radius: 30px;
      color: white;
      font-size: 1.2rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      box-shadow: 0 10px 30px rgba(54, 209, 220, 0.3);
    }
    
    .export-btn:hover {
      transform: translateY(-5px) scale(1.05);
      box-shadow: 0 20px 40px rgba(54, 209, 220, 0.5);
    }

    /* NEW: Love Map Styles */
    .love-map {
      margin: 50px 0;
      padding: 40px;
      background: rgba(160, 196, 255, 0.05);
      border-radius: 20px;
      text-align: center;
      border: 2px solid rgba(160, 196, 255, 0.2);
    }
    
    .location-tag {
      padding: 12px 25px;
      background: rgba(255, 255, 255, 0.08);
      border: 2px solid rgba(160, 196, 255, 0.3);
      border-radius: 25px;
      cursor: pointer;
      transition: all 0.3s;
      display: inline-block;
      margin: 10px;
      font-size: 1.1rem;
    }
    
    .location-tag:hover {
      background: rgba(160, 196, 255, 0.2);
      transform: translateY(-5px) scale(1.05);
      box-shadow: 0 10px 20px rgba(160, 196, 255, 0.2);
    }
    
    .map-container {
      position: relative;
      height: 300px;
      background: rgba(0, 0, 0, 0.2);
      border-radius: 15px;
      margin-top: 30px;
      overflow: hidden;
      background-image: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%23a0c4ff' fill-opacity='0.1' fill-rule='evenodd'/%3E%3C/svg%3E");
    }
    
    .map-point {
      position: absolute;
      cursor: pointer;
      transition: all 0.3s;
    }
    
    .map-point .point {
      font-size: 2rem;
      animation: pulse 2s infinite;
    }
    
    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.2); }
    }
    
    .map-point .tooltip {
      position: absolute;
      bottom: 100%;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 8px 15px;
      border-radius: 10px;
      white-space: nowrap;
      opacity: 0;
      transition: opacity 0.3s;
      pointer-events: none;
    }
    
    .map-point:hover .tooltip {
      opacity: 1;
    }
    
    /* NEW: Time Capsule */
    .time-capsule {
      margin: 50px 0;
      padding: 40px;
      background: rgba(255, 214, 165, 0.05);
      border-radius: 20px;
      text-align: center;
      border: 2px solid rgba(255, 214, 165, 0.3);
    }
    
    .time-capsule textarea {
      width: 100%;
      height: 150px;
      padding: 20px;
      margin: 20px 0;
      background: rgba(255, 255, 255, 0.05);
      border: 2px solid rgba(255, 255, 255, 0.2);
      border-radius: 15px;
      color: white;
      font-size: 1.1rem;
      font-family: 'Poppins', sans-serif;
      resize: vertical;
    }
    
    .time-capsule button {
      padding: 15px 40px;
      background: linear-gradient(to right, #ff9aa2, #ffd6a5);
      border: none;
      border-radius: 25px;
      color: white;
      font-weight: 600;
      font-size: 1.1rem;
      cursor: pointer;
      transition: all 0.3s;
    }
    
    .time-capsule button:hover {
      transform: translateY(-5px);
      box-shadow: 0 15px 30px rgba(255, 154, 162, 0.3);
    }
    
    .capsule-sealed {
      animation: capsuleSeal 2s forwards;
    }
    
    @keyframes capsuleSeal {
      0% { transform: scale(1); }
      100% { transform: scale(0); opacity: 0; }
    }
    
    /* NEW: Emotional Weather */
    .weather-widget {
      margin: 50px 0;
      padding: 40px;
      background: linear-gradient(135deg, rgba(255,154,162,0.1), rgba(199,125,255,0.1));
      border-radius: 20px;
      text-align: center;
    }
    
    .weather-card {
      background: rgba(255, 255, 255, 0.05);
      border-radius: 15px;
      padding: 30px;
      margin-top: 20px;
      display: inline-block;
      min-width: 300px;
    }
    
    .weather-icon {
      font-size: 4rem;
      margin-bottom: 15px;
    }
    
    .weather-desc {
      font-size: 1.3rem;
      color: #ff9aa2;
      margin-bottom: 10px;
    }
    
    .temperature {
      font-size: 2rem;
      color: #a0c4ff;
    }
    
    /* NEW: Relationship Stats */
    .stats {
      margin: 50px 0;
      text-align: center;
    }
    
    .stat-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 20px;
      margin-top: 30px;
    }
    
    @media (max-width: 768px) {
      .stat-grid {
        grid-template-columns: repeat(2, 1fr);
      }
    }
    
    @media (max-width: 480px) {
      .stat-grid {
        grid-template-columns: 1fr;
      }
    }
    
    .stat {
      background: rgba(255, 255, 255, 0.03);
      padding: 30px;
      border-radius: 15px;
      transition: all 0.3s;
    }
    
    .stat:hover {
      transform: translateY(-10px);
      background: rgba(255, 255, 255, 0.05);
      box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
    }
    
    .stat .number {
      font-size: 3rem;
      font-weight: 700;
      margin-bottom: 10px;
      background: linear-gradient(to right, #ff9aa2, #c77dff);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    
    .stat .label {
      opacity: 0.8;
      font-size: 1.1rem;
    }
    
    /* NEW: Poetry Builder */
    .poetry-builder {
      margin: 50px 0;
      padding: 40px;
      background: rgba(199, 125, 255, 0.05);
      border-radius: 20px;
      border: 2px solid rgba(199, 125, 255, 0.3);
    }
    
    .word-bank {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin: 20px 0;
      justify-content: center;
    }
    
    .word {
      padding: 10px 20px;
      background: rgba(255, 255, 255, 0.08);
      border-radius: 20px;
      cursor: grab;
      user-select: none;
      transition: all 0.3s;
    }
    
    .word:hover {
      background: rgba(199, 125, 255, 0.2);
      transform: scale(1.05);
    }
    
    .word.dragging {
      opacity: 0.5;
    }
    
    .poetry-canvas {
      min-height: 200px;
      background: rgba(0, 0, 0, 0.2);
      border-radius: 15px;
      margin: 30px 0;
      padding: 30px;
      border: 2px dashed rgba(255, 255, 255, 0.1);
    }
    
    /* NEW: Conversation Replay */
    .conversation-replay {
      margin: 50px 0;
      padding: 40px;
      background: rgba(255, 255, 255, 0.03);
      border-radius: 20px;
    }
    
    .chat-container {
      max-width: 600px;
      margin: 30px auto;
      background: rgba(0, 0, 0, 0.2);
      border-radius: 15px;
      padding: 20px;
      max-height: 400px;
      overflow-y: auto;
    }
    
    .message {
      margin: 15px 0;
      padding: 12px 20px;
      border-radius: 20px;
      max-width: 80%;
      clear: both;
    }
    
    .message.sent {
      background: rgba(160, 196, 255, 0.3);
      float: right;
      border-bottom-right-radius: 5px;
    }
    
    .message.received {
      background: rgba(255, 154, 162, 0.3);
      float: left;
      border-bottom-left-radius: 5px;
    }
    
    .message-time {
      font-size: 0.8rem;
      opacity: 0.6;
      margin-top: 5px;
    }
    
    /* NEW: Meditation */
    .meditation {
      margin: 50px 0;
      padding: 40px;
      background: rgba(107, 255, 194, 0.05);
      border-radius: 20px;
      text-align: center;
      border: 2px solid rgba(107, 255, 194, 0.3);
    }
    
    .breathing-circle {
      width: 200px;
      height: 200px;
      margin: 30px auto;
      position: relative;
    }
    
    .circle {
      width: 100%;
      height: 100%;
      border-radius: 50%;
      background: rgba(107, 255, 194, 0.1);
      border: 3px solid rgba(107, 255, 194, 0.3);
      animation: breathe 8s infinite ease-in-out;
    }
    
    @keyframes breathe {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.2); }
    }
    
    .breathing-circle p {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 1.2rem;
      color: #6bffc2;
    }
    
    /* NEW: Polaroid Gallery */
    .polaroid-gallery {
      margin: 50px 0;
    }
    
    .polaroids {
      display: flex;
      flex-wrap: wrap;
      gap: 30px;
      justify-content: center;
      margin-top: 30px;
    }
    
    .polaroid {
      width: 250px;
      padding: 15px 15px 60px 15px;
      background: white;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
      transform: rotate(var(--rotate));
      transition: all 0.5s ease;
      cursor: pointer;
    }
    
    .polaroid:hover {
      transform: rotate(0deg) scale(1.05);
      z-index: 10;
    }
    
    .polaroid img {
      width: 100%;
      height: 200px;
      object-fit: cover;
      filter: sepia(80%);
      transition: filter 0.5s;
    }
    
    .polaroid:hover img {
      filter: sepia(0%);
    }
    
    .polaroid .caption {
      color: #333;
      text-align: center;
      margin-top: 15px;
      font-family: 'Dancing Script', cursive;
      font-size: 1.2rem;
    }
    
    /* NEW: Constellation */
    .constellation {
      margin: 50px 0;
      padding: 40px;
      background: rgba(0, 0, 0, 0.3);
      border-radius: 20px;
      text-align: center;
      position: relative;
      height: 400px;
      overflow: hidden;
    }
    
    .star-point {
      position: absolute;
      width: 10px;
      height: 10px;
      background: white;
      border-radius: 50%;
      cursor: pointer;
      transition: all 0.3s;
    }
    
    .star-point:hover {
      transform: scale(2);
      background: #ff9aa2;
      box-shadow: 0 0 20px #ff9aa2;
    }
    
    .star-line {
      position: absolute;
      height: 2px;
      background: rgba(255, 255, 255, 0.3);
      transform-origin: 0 0;
    }

    footer{
      text-align:center;
      margin-top:60px;
      opacity:.8;
      font-size: 1rem;
      padding-top: 30px;
      border-top: 1px solid rgba(255, 255, 255, 0.15);}

    audio{display:none}

    @media(max-width:768px){
      .container{padding:30px;margin:30px 20px;}
      header h1{font-size:3rem;}
      .gallery-grid{grid-template-columns:1fr}
      .timeline{padding:20px;}
      .letter{padding:25px;}
      .reaction-buttons{gap:10px;}
      .reaction-buttons button{padding:10px 15px;font-size:1rem;}
      .music-player{bottom:20px;right:20px;padding:10px 20px;}
      .polaroid{width: 200px;}
      .stat-grid{grid-template-columns:1fr;}
    }
    
    /* Secret Message */
    .secret-message {
      position: fixed;
      background: rgba(255, 154, 162, 0.95);
      color: white;
      padding: 15px 25px;
      border-radius: 25px;
      font-size: 1rem;
      z-index: 10000;
      pointer-events: none;
      animation: floatUp 2s forwards;
      box-shadow: 0 10px 30px rgba(255, 154, 162, 0.3);
      max-width: 300px;
      text-align: center;
    }
    
    @keyframes floatUp {
      0% { transform: translateY(0) scale(0.8); opacity: 0; }
      10% { transform: translateY(-20px) scale(1); opacity: 1; }
      90% { opacity: 1; }
      100% { transform: translateY(-100px) scale(0.8); opacity: 0; }
    }
  </style>
</head>
<body>

<!-- Stars Background -->
<div id="stars"></div>

<!-- Falling Petals -->
<div id="petals"></div>

<!-- Password Lock -->
<div id="lock">
  <div class="lock-box">
    <h2>Only For Your Eyes</h2>
    <p>This message holds pieces of my heart.<br>Enter the word that represents 'us' to continue...</p>
    <input type="password" id="pwd" placeholder="Our special word..." autocomplete="off" />
    <button onclick="unlock()">Enter Our World</button>
    <p style="margin-top: 20px; font-size: 0.9rem; opacity: 0.7;">Hint: Something we promised each other</p>
  </div>
</div>

<audio id="bgm" loop>
  <source src="the-vulture-109281.mp3" type="audio/mpeg">
</audio>

<!-- Music Player -->
<div class="music-player" style="display: none;" id="musicPlayer">
  <button class="music-btn" onclick="toggleMusic()" id="playBtn">
    <i class="fas fa-play"></i>
  </button>
  <span style="font-size: 1rem;">Our Background Music</span>
</div>

<div class="container">
  <header class="reveal">
    <h1 id="mainTitle">For You, My Love</h1>
    <p>üíî final goodbye ¬∑ ü•Ä memories we shared ¬∑ üåô our late-night talks ¬∑ üéµ our song ¬∑ ‚ú® forever in my heart</p>
  </header>

  <!-- Days Counter -->
  <div class="reveal" id="daysCounter" style="text-align: center; margin: 30px 0;"></div>

  <!-- Relationship Stats -->
  <div class="stats reveal">
    <h2><i class="fas fa-chart-pie"></i> Our Relationship in Numbers</h2>
    <div class="stat-grid">
      <div class="stat">
        <div class="number" id="daysStat">0</div>
        <div class="label">Days of Memories</div>
      </div>
      <div class="stat">
        <div class="number">‚àû</div>
        <div class="label">Smiles Shared</div>
      </div>
      <div class="stat">
        <div class="number">100%</div>
        <div class="label">Heart Given</div>
      </div>
    </div>
  </div>

  <!-- Emotional Weather -->
  <div class="weather-widget reveal">
    <h2><i class="fas fa-cloud-moon-rain"></i> Today's Emotional Forecast</h2>
    <div class="weather-card">
      <div class="weather-icon">üåßÔ∏èüíî‚òÄÔ∏è</div>
      <div class="weather-desc">Partly Cloudy with Showers of Nostalgia</div>
      <div class="temperature">72¬∞F of Warm Memories</div>
    </div>
  </div>

  <!-- Image Gallery -->
  <div class="gallery reveal">
    <h2><i class="fas fa-images"></i> Moments Frozen in Time</h2>
    <div class="gallery-grid">
      <div class="gallery-item" onclick="openLightbox(this)">
        <img src="https://images.unsplash.com/photo-1519681393784-d120267933ba?auto=format&fit=crop&w=800&q=80" alt="Starry Night">
        <div class="caption">Our Starry Nights</div>
      </div>
      <div class="gallery-item" onclick="openLightbox(this)">
        <img src="https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?auto=format&fit=crop&w=800&q=80" alt="Empty Road">
        <div class="caption">Roads We Traveled</div>
      </div>
      <div class="gallery-item" onclick="openLightbox(this)">
        <img src="https://images.unsplash.com/photo-1513475382585-d06e58bcb0e0?auto=format&fit=crop&w=800&q=80" alt="Coffee Shop">
        <div class="caption">Coffee Shop Memories</div>
      </div>
    </div>
  </div>

  <!-- Polaroid Gallery -->
  <div class="polaroid-gallery reveal">
    <h2><i class="fas fa-camera-retro"></i> Polaroid Memories</h2>
    <div class="polaroids" id="polaroidsContainer"></div>
  </div>

  <!-- Love Map -->
  <div class="love-map reveal">
    <h2><i class="fas fa-map-marker-alt"></i> Places That Hold Our Story</h2>
    <div class="map-container" id="loveMap">
      <!-- Map points will be added here -->
    </div>
    <div style="margin-top: 20px;">
      <div class="location-tag" onclick="showLocationMemory('college')">üè´ College</div>
      <div class="location-tag" onclick="showLocationMemory('cafe')">‚òï Caf√©</div>
      <div class="location-tag" onclick="showLocationMemory('park')">üå≥ Park</div>
      <div class="location-tag" onclick="showLocationMemory('city')">üåÜ City View</div>
      <div class="location-tag" onclick="showLocationMemory('beach')">üèñÔ∏è Beach</div>
    </div>
  </div>

  <!-- Timeline -->
  <section class="timeline reveal">
    <h2><i class="fas fa-history"></i> Our Journey Together</h2>
    <div class="timeline-container">
      <div class="timeline-item" onclick="showMemoryDetails('firstMeet')">
        <div class="date">First Meet - College Fest</div>
        <div class="content">That nervous smile, the accidental eye contact that lasted a second too long...</div>
      </div>
      <div class="timeline-item" onclick="showMemoryDetails('firstDate')">
        <div class="date">First Date - Caf√© by the Park</div>
        <div class="content">Endless conversations, awkward silences that felt comfortable, discovering your love for black coffee...</div>
      </div>
      <div class="timeline-item" onclick="showMemoryDetails('birthday')">
        <div class="date">Your Birthday Surprise</div>
        <div class="content">The surprise party, your happy tears, that moment you hugged me and whispered "thank you"...</div>
      </div>
      <div class="timeline-item" onclick="showMemoryDetails('lastMeet')">
        <div class="date">The Last Goodbye</div>
        <div class="content">The unspoken words, the lingering hug, the promise to always remember...</div>
      </div>
    </div>
  </section>

  <!-- Constellation -->
  <div class="constellation reveal" id="constellation">
    <h2><i class="fas fa-star"></i> Our Memory Constellation</h2>
    <p>Click on stars to reveal memories...</p>
    <!-- Stars and lines will be drawn here -->
  </div>

  <!-- Love Quote -->
  <div class="reveal" style="text-align: center; margin: 40px 0; padding: 30px; background: rgba(255, 154, 162, 0.1); border-radius: 20px; border-left: 5px solid #ff9aa2;">
    <h3 style="font-family: 'Dancing Script', cursive; font-size: 2rem; color: #ff9aa2;">
      "Some souls are meant to meet, even if they're not meant to stay forever. And in that meeting, they change each other's universe."
    </h3>
  </div>

  <!-- Memory Jar -->
  <div class="memory-jar reveal">
    <h2><i class="fas fa-jar"></i> Our Memory Jar</h2>
    <p>Add your memories to our jar... They'll float here forever.</p>
    <div class="jar-container" id="jar">
      <!-- Memories will be added here -->
    </div>
    <div class="memory-input">
      <input type="text" id="newMemory" placeholder="Write a memory... (e.g., 'The day you made me laugh so hard I cried')">
      <button onclick="addMemory()"><i class="fas fa-plus"></i> Add Memory</button>
    </div>
  </div>

  <!-- Poetry Builder -->
  <div class="poetry-builder reveal">
    <h2><i class="fas fa-feather-alt"></i> Build Our Poem</h2>
    <p>Drag words to create your own poem...</p>
    <div class="word-bank" id="wordBank"></div>
    <div class="poetry-canvas" id="poetryCanvas" ondrop="drop(event)" ondragover="allowDrop(event)">
      <p style="opacity: 0.6; text-align: center;">Drop words here to build your poem</p>
    </div>
    <button onclick="clearPoem()" style="margin-right: 10px;">Clear Poem</button>
    <button onclick="savePoem()">Save This Poem</button>
  </div>

  <!-- Time Capsule -->
  <div class="time-capsule reveal">
    <h2><i class="fas fa-time-capsule"></i> Message in a Bottle</h2>
    <p>Write a message to your future selves...</p>
    <textarea id="capsuleMessage" placeholder="What would you say to each other one year from now?"></textarea>
    <button onclick="sealCapsule()"><i class="fas fa-lock"></i> Seal This Message</button>
    <div id="capsuleDate" style="margin-top: 20px; display: none;"></div>
  </div>

  <!-- Conversation Replay -->
  <div class="conversation-replay reveal">
    <h2><i class="fas fa-comments"></i> Our Conversation</h2>
    <p>Relive our special moments...</p>
    <div class="chat-container" id="chatContainer"></div>
    <button onclick="startConversation()" style="margin-top: 20px;"><i class="fas fa-play"></i> Play Conversation</button>
  </div>

  <!-- Meditation -->
  <div class="meditation reveal">
    <h2><i class="fas fa-wind"></i> Breathe With Me</h2>
    <p>When memories feel heavy, take a moment to breathe...</p>
    <div class="breathing-circle">
      <div class="circle"></div>
      <p id="breathText">Breathe In...</p>
    </div>
    <p class="instruction">Follow the circle - Inhale as it grows, Exhale as it shrinks</p>
    <button onclick="startMeditation()" style="margin-top: 20px;"><i class="fas fa-spa"></i> Begin Breathing Exercise</button>
  </div>

  <!-- Voice Message -->
  <div class="voice-message reveal">
    <h2><i class="fas fa-microphone-alt"></i> A Voice Note From My Heart</h2>
    <div class="voice-player">
      <button class="play-voice" onclick="playVoiceMessage()">
        <i class="fas fa-play"></i> Listen to My Heart
      </button>
      <div class="waveform" id="waveform"></div>
    </div>
  </div>

  <!-- Letter Section -->
  <section class="letter reveal">
    <h2>Words I Could Never Say Out Loud</h2>
    <p class="type" id="typeText"></p>
    <div class="signature">Always & Forever,<br>Yours Truly</div>
    
    <!-- Burn Letter Button -->
    <button id="burnBtn" style="display: block; margin: 40px auto; padding: 15px 35px; background: linear-gradient(to right, #ff6b6b, #ff8e53); border: none; border-radius: 25px; color: white; font-weight: bold; cursor: pointer; transition: all 0.3s;">
      üî• Release These Feelings
    </button>
  </section>

  <!-- Reactions -->
  <div class="reactions reveal">
    <h3>How does reading this make you feel?</h3>
    <div class="reaction-buttons">
      <button onclick="react('üò¢')">üò¢ Sad</button>
      <button onclick="react('‚ù§Ô∏è')">‚ù§Ô∏è Loved</button>
      <button onclick="react('ü§ó')">ü§ó Warm</button>
      <button onclick="react('üòî')">üòî Nostalgic</button>
      <button onclick="react('üí≠')">üí≠ Thinking</button>
      <button onclick="react('‚ú®')">‚ú® Hopeful</button>
    </div>
    <div id="reactionMessage"></div>
  </div>

  <!-- Export Button -->
  <button class="export-btn reveal" onclick="exportAsMemoryCard()">
    <i class="fas fa-download"></i> Save as Memory Card
  </button>

  <footer class="reveal">
    <p>Created with love, memories, and a heart full of emotions</p>
    <p style="margin-top: 15px; font-size: 0.9rem; opacity: 0.7;">
      Made by Shubham ¬∑ For my college creative expression project and for you
    </p>
  </footer>
</div>

<script>
// =========== INITIALIZATION ===========
window.onload = function() {
  createStars();
  createFallingPetals();
  createHearts();
  personalizePage();
  calculateDays();
  addPredefinedMemories();
  createBurnEffect();
  createLoveMap();
  createPolaroidGallery();
  createConstellation();
  createWordBank();
  initializeConversation();
  initializeMeditation();
  
  // Start reveals
  setTimeout(() => {
    const scrollEvent = new Event('scroll');
    window.dispatchEvent(scrollEvent);
  }, 500);
};

// =========== VISUAL EFFECTS ===========
function createStars() {
  const starsContainer = document.getElementById('stars');
  for(let i = 0; i < 200; i++) {
    const star = document.createElement('div');
    star.className = 'star';
    star.style.cssText = `
      left: ${Math.random() * 100}%;
      top: ${Math.random() * 100}%;
      width: ${Math.random() * 3 + 1}px;
      height: ${Math.random() * 3 + 1}px;
      opacity: ${Math.random() * 0.5 + 0.2};
      animation-delay: ${Math.random() * 3}s;
    `;
    starsContainer.appendChild(star);
  }
}

function createFallingPetals() {
  const petals = ['üå∏', 'üçÇ', 'ü•Ä', '‚ú®', 'üí´', '‚ù§Ô∏è', 'üíî', 'üåô'];
  setInterval(() => {
    const petal = document.createElement('div');
    petal.innerHTML = petals[Math.floor(Math.random() * petals.length)];
    petal.style.cssText = `
      position: fixed;
      top: -50px;
      left: ${Math.random() * 100}%;
      font-size: ${Math.random() * 25 + 15}px;
      opacity: ${Math.random() * 0.4 + 0.2};
      animation: fall ${Math.random() * 8 + 4}s linear forwards;
      pointer-events: none;
      z-index: 1;
    `;
    document.getElementById('petals').appendChild(petal);
    setTimeout(() => petal.remove(), 12000);
  }, 800);
}

function createHearts() {
  for(let i = 0; i < 20; i++) {
    setTimeout(() => {
      const heart = document.createElement('div');
      heart.innerHTML = '‚ù§';
      heart.style.cssText = `
        position: fixed;
        color: ${['#ff9aa2', '#c77dff', '#a0c4ff'][Math.floor(Math.random() * 3)]};
        font-size: ${Math.random() * 25 + 15}px;
        left: ${Math.random() * 100}%;
        top: ${Math.random() * 100}%;
        opacity: ${Math.random() * 0.3 + 0.1};
        animation: float ${Math.random() * 6 + 4}s ease-in-out infinite;
        pointer-events: none;
        z-index: 1;
      `;
      document.body.appendChild(heart);
    }, i * 300);
  }
}

// =========== PASSWORD SYSTEM ===========
function unlock() {
  const password = document.getElementById('pwd').value.toLowerCase();
  const validPasswords = ['forever', 'always', 'love', 'us', 'together', 'memory'];
  
  if(validPasswords.includes(password)) {
    // Success animation
    document.getElementById('lock').style.opacity = '0';
    document.getElementById('lock').style.transition = 'opacity 1s ease';
    
    // Create celebration effect
    for(let i = 0; i < 50; i++) {
      setTimeout(() => {
        const confetti = document.createElement('div');
        confetti.innerHTML = ['‚ú®', '‚ù§Ô∏è', 'üå∏', 'ü•Ä'][Math.floor(Math.random() * 4)];
        confetti.style.cssText = `
          position: fixed;
          left: ${Math.random() * 100}%;
          top: ${Math.random() * 100}%;
          font-size: 25px;
          opacity: 0.8;
          animation: fall ${Math.random() * 2 + 1}s linear forwards;
          pointer-events: none;
          z-index: 10000;
        `;
        document.body.appendChild(confetti);
        setTimeout(() => confetti.remove(), 2000);
      }, i * 50);
    }
    
    setTimeout(() => {
      document.getElementById('lock').style.display = 'none';
    }, 1000);
    
    // Show music player
    document.getElementById('musicPlayer').style.display = 'flex';
    
    // Start music
    setTimeout(() => {
      document.getElementById('bgm').play();
      document.getElementById('playBtn').innerHTML = '<i class="fas fa-pause"></i>';
      isPlaying = true;
    }, 500);
    
    // Start typewriter
    setTimeout(type, 1000);
  } else {
    // Error effect
    const input = document.getElementById('pwd');
    input.style.borderColor = '#ff6b6b';
    input.style.boxShadow = '0 0 20px rgba(255, 107, 107, 0.5)';
    input.value = '';
    input.placeholder = 'Try again... remember us?';
    
    setTimeout(() => {
      input.style.borderColor = 'rgba(255, 255, 255, 0.2)';
      input.style.boxShadow = 'none';
      input.placeholder = 'Our special word...';
    }, 2000);
  }
}

// Enter key support
document.getElementById('pwd').addEventListener('keypress', function(e) {
  if (e.key === 'Enter') unlock();
});

// =========== PERSONALIZATION ===========
function personalizePage() {
  const urlParams = new URLSearchParams(window.location.search);
  const name = urlParams.get('name');
  if (name) {
    document.title = `For ${name} - Eternal Memories`;
    document.getElementById('mainTitle').innerHTML = `For You, ${name}`;
  }
}

// =========== DAYS COUNTER ===========
function calculateDays() {
  const firstDate = new Date('2023-09-15'); // Change to your first meeting date
  const today = new Date();
  const diffTime = Math.abs(today - firstDate);
  const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
  
  document.getElementById('daysCounter').innerHTML = `
    <div style="background: linear-gradient(135deg, rgba(255,154,162,0.2), rgba(199,125,255,0.2)); padding: 20px; border-radius: 15px; display: inline-block;">
      <h3 style="color: #ff9aa2; font-size: 2.5rem; margin: 0;">${diffDays}</h3>
      <p style="margin: 5px 0 0 0; opacity: 0.8;">days since our story began</p>
    </div>
  `;
  
  // Update stats
  document.getElementById('daysStat').textContent = diffDays;
  
  return diffDays;
}

// =========== LOVE MAP ===========
function createLoveMap() {
  const map = document.getElementById('loveMap');
  const locations = [
    {name: 'College', top: '30%', left: '40%', memory: 'Where we first met'},
    {name: 'Caf√©', top: '50%', left: '60%', memory: 'Our first date spot'},
    {name: 'Park', top: '70%', left: '30%', memory: 'Sundays spent together'},
    {name: 'City View', top: '40%', left: '70%', memory: 'That unforgettable night'},
    {name: 'Beach', top: '60%', left: '20%', memory: 'Walking hand in hand'}
  ];
  
  locations.forEach(loc => {
    const point = document.createElement('div');
    point.className = 'map-point';
    point.style.top = loc.top;
    point.style.left = loc.left;
    point.innerHTML = `
      <div class="point">üìç</div>
      <div class="tooltip">${loc.name}</div>
    `;
    point.onclick = () => showLocationMemory(loc.name.toLowerCase());
    map.appendChild(point);
  });
}

function showLocationMemory(location) {
  const memories = {
    college: "That day in college when our eyes met... I knew something was different.",
    cafe: "The caf√© where we had our first date. You were nervous, I was nervous. But your smile made everything okay.",
    park: "Sunday afternoons in the park, talking about everything and nothing at all.",
    city: "The city lights looked beautiful that night, but not as beautiful as you.",
    beach: "Walking hand in hand along the shore, the waves whispering secrets only we could understand."
  };
  
  showSecretMessage(memories[location] || "A special memory from this place...");
}

// =========== POLAROID GALLERY ===========
function createPolaroidGallery() {
  const polaroids = [
    {img: 'https://images.unsplash.com/photo-1519681393784-d120267933ba?auto=format&fit=crop&w=400&q=80', caption: 'Starry Nights', rotate: '-2deg'},
    {img: 'https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?auto=format&fit=crop&w=400&q=80', caption: 'Endless Roads', rotate: '3deg'},
    {img: 'https://images.unsplash.com/photo-1513475382585-d06e58bcb0e0?auto=format&fit=crop&w=400&q=80', caption: 'Coffee Talks', rotate: '-4deg'},
    {img: 'https://images.unsplash.com/photo-1518837695005-2083093ee35b?auto=format&fit=crop&w=400&q=80', caption: 'Rainy Days', rotate: '2deg'},
    {img: 'https://images.unsplash.com/photo-1492684223066-e9e4aab4d25e?auto=format&fit=crop&w=400&q=80', caption: 'City Lights', rotate: '-3deg'},
    {img: 'https://images.unsplash.com/photo-1519904981063-b0cf448d479e?auto=format&fit=crop&w=400&q=80', caption: 'Beach Memories', rotate: '4deg'}
  ];
  
  const container = document.getElementById('polaroidsContainer');
  polaroids.forEach(p => {
    const polaroid = document.createElement('div');
    polaroid.className = 'polaroid';
    polaroid.style.setProperty('--rotate', p.rotate);
    polaroid.innerHTML = `
      <img src="${p.img}" alt="${p.caption}">
      <div class="caption">${p.caption}</div>
    `;
    polaroid.onclick = () => openLightbox(polaroid);
    container.appendChild(polaroid);
  });
}

// =========== CONSTELLATION ===========
function createConstellation() {
  const container = document.getElementById('constellation');
  const stars = [];
  
  // Create stars
  for(let i = 0; i < 15; i++) {
    const star = document.createElement('div');
    star.className = 'star-point';
    star.style.left = `${Math.random() * 90 + 5}%`;
    star.style.top = `${Math.random() * 80 + 10}%`;
    
    const memories = [
      "First smile",
      "Shared laugh",
      "Late night call",
      "Stolen glance",
      "Heartfelt promise",
      "Tender moment",
      "Silent understanding",
      "Unspoken bond"
    ];
    
    star.onclick = () => {
      showSecretMessage(memories[Math.floor(Math.random() * memories.length)]);
      star.style.background = '#ff9aa2';
      star.style.boxShadow = '0 0 20px #ff9aa2';
      setTimeout(() => {
        star.style.background = 'white';
        star.style.boxShadow = 'none';
      }, 2000);
    };
    
    container.appendChild(star);
    stars.push({
      element: star,
      x: parseFloat(star.style.left),
      y: parseFloat(star.style.top)
    });
  }
  
  // Connect some stars with lines
  setTimeout(() => {
    for(let i = 0; i < stars.length; i++) {
      for(let j = i + 1; j < Math.min(i + 3, stars.length); j++) {
        const line = document.createElement('div');
        line.className = 'star-line';
        
        const dx = stars[j].x - stars[i].x;
        const dy = stars[j].y - stars[i].y;
        const length = Math.sqrt(dx * dx + dy * dy);
        const angle = Math.atan2(dy, dx) * 180 / Math.PI;
        
        line.style.width = `${length}%`;
        line.style.left = `${stars[i].x}%`;
        line.style.top = `${stars[i].y}%`;
        line.style.transform = `rotate(${angle}deg)`;
        
        container.appendChild(line);
      }
    }
  }, 100);
}

// =========== POETRY BUILDER ===========
function createWordBank() {
  const wordBank = document.getElementById('wordBank');
  const words = {
    nouns: ['heart', 'memory', 'smile', 'moment', 'promise', 'whisper', 'tear', 'dream', 'star', 'soul'],
    verbs: ['remember', 'cherish', 'miss', 'hold', 'dream', 'whisper', 'dance', 'fade', 'glow', 'linger'],
    adjectives: ['beautiful', 'bitter-sweet', 'unforgettable', 'fleeting', 'precious', 'gentle', 'quiet', 'eternal', 'warm', 'tender']
  };
  
  Object.entries(words).forEach(([type, wordList]) => {
    wordList.forEach(word => {
      const wordElement = document.createElement('div');
      wordElement.className = 'word';
      wordElement.textContent = word;
      wordElement.draggable = true;
      wordElement.ondragstart = (e) => {
        e.dataTransfer.setData('text/plain', word);
        wordElement.classList.add('dragging');
      };
      wordElement.ondragend = () => {
        wordElement.classList.remove('dragging');
      };
      wordBank.appendChild(wordElement);
    });
  });
}

function allowDrop(e) {
  e.preventDefault();
}

function drop(e) {
  e.preventDefault();
  const word = e.dataTransfer.getData('text/plain');
  const wordElement = document.createElement('span');
  wordElement.textContent = word + ' ';
  wordElement.style.marginRight = '5px';
  wordElement.style.padding = '5px 10px';
  wordElement.style.background = 'rgba(199, 125, 255, 0.2)';
  wordElement.style.borderRadius = '10px';
  wordElement.style.display = 'inline-block';
  wordElement.style.marginBottom = '5px';
  e.target.appendChild(wordElement);
}

function clearPoem() {
  document.getElementById('poetryCanvas').innerHTML = 
    '<p style="opacity: 0.6; text-align: center;">Drop words here to build your poem</p>';
}

function savePoem() {
  const poem = document.getElementById('poetryCanvas').innerText;
  if(poem.length > 50) {
    showSecretMessage("Poem saved in our memory book! üìñ");
    // In a real app, you could save this to localStorage
  } else {
    showSecretMessage("Add more words to create a beautiful poem...");
  }
}

// =========== TIME CAPSULE ===========
function sealCapsule() {
  const message = document.getElementById('capsuleMessage').value.trim();
  if(message.length > 10) {
    const capsule = document.querySelector('.time-capsule');
    capsule.classList.add('capsule-sealed');
    
    // Save to localStorage
    const capsuleData = {
      message: message,
      date: new Date().toISOString(),
      openDate: new Date(Date.now() + 365 * 24 * 60 * 60 * 1000).toISOString() // One year from now
    };
    
    localStorage.setItem('loveCapsule', JSON.stringify(capsuleData));
    
    setTimeout(() => {
      showSecretMessage("Message sealed! It will open one year from now. üìú");
      capsule.style.display = 'none';
    }, 2000);
  } else {
    showSecretMessage("Write a longer message for your future selves...");
  }
}

// =========== CONVERSATION REPLAY ===========
function initializeConversation() {
  const conversation = [
    {sender: 'you', text: 'Hey...', time: '8:00 PM'},
    {sender: 'them', text: 'Hi! How was your day?', time: '8:01 PM'},
    {sender: 'you', text: 'It was okay. Better now that I\'m talking to you.', time: '8:02 PM'},
    {sender: 'them', text: 'Aww, that\'s sweet üòä', time: '8:03 PM'},
    {sender: 'you', text: 'Remember that song we both loved?', time: '8:05 PM'},
    {sender: 'them', text: 'Of course! It still reminds me of you.', time: '8:06 PM'},
    {sender: 'you', text: 'Me too... always.', time: '8:07 PM'},
    {sender: 'them', text: 'Some memories never fade.', time: '8:08 PM'},
    {sender: 'you', text: 'No, they don\'t. They stay with us forever.', time: '8:09 PM'}
  ];
  
  window.conversationData = conversation;
}

function startConversation() {
  const container = document.getElementById('chatContainer');
  container.innerHTML = '';
  let delay = 0;
  
  window.conversationData.forEach((msg, index) => {
    setTimeout(() => {
      const messageDiv = document.createElement('div');
      messageDiv.className = `message ${msg.sender === 'you' ? 'sent' : 'received'}`;
      messageDiv.innerHTML = `
        <div>${msg.text}</div>
        <div class="message-time">${msg.time}</div>
      `;
      container.appendChild(messageDiv);
      container.scrollTop = container.scrollHeight;
      
      // Add typing effect for last message
      if(index === window.conversationData.length - 1) {
        showSecretMessage("Reliving our conversations... üí≠");
      }
    }, delay);
    
    delay += 1500; // 1.5 seconds between messages
  });
}

// =========== MEDITATION ===========
function initializeMeditation() {
  let isBreathingIn = true;
  window.meditationInterval = null;
}

function startMeditation() {
  const breathText = document.getElementById('breathText');
  let count = 0;
  const totalCycles = 5;
  
  if(window.meditationInterval) {
    clearInterval(window.meditationInterval);
  }
  
  window.meditationInterval = setInterval(() => {
    if(count >= totalCycles * 2) { // Each cycle has inhale + exhale
      clearInterval(window.meditationInterval);
      breathText.textContent = "Peaceful...";
      showSecretMessage("Feel lighter? Breathe through the memories. üåø");
      return;
    }
    
    if(count % 2 === 0) {
      breathText.textContent = "Breathe In...";
    } else {
      breathText.textContent = "Breathe Out...";
    }
    
    count++;
  }, 4000); // 4 seconds per breath phase
}

// =========== MEMORY JAR ===========
function addPredefinedMemories() {
  const memories = [
    {text: "Your smile on our first date", color: "rgba(255, 154, 162, 0.3)", left: "10%", top: "20%"},
    {text: "Late night conversations", color: "rgba(199, 125, 255, 0.3)", left: "70%", top: "30%"},
    {text: "That song we both loved", color: "rgba(160, 196, 255, 0.3)", left: "30%", top: "60%"},
    {text: "Coffee shop memories", color: "rgba(255, 214, 165, 0.3)", left: "60%", top: "70%"}
  ];
  
  memories.forEach(memory => {
    const memoryDiv = document.createElement('div');
    memoryDiv.className = 'memory-note';
    memoryDiv.innerHTML = memory.text;
    memoryDiv.style.cssText = `
      background: ${memory.color};
      left: ${memory.left};
      top: ${memory.top};
      transform: rotate(${Math.random() * 20 - 10}deg);
      z-index: ${Math.floor(Math.random() * 10)};
    `;
    makeDraggable(memoryDiv);
    document.getElementById('jar').appendChild(memoryDiv);
  });
}

function addMemory() {
  const memoryInput = document.getElementById('newMemory');
  const memory = memoryInput.value.trim();
  
  if(memory) {
    const memoryDiv = document.createElement('div');
    memoryDiv.className = 'memory-note';
    memoryDiv.innerHTML = memory;
    
    const colors = [
      'rgba(255, 154, 162, 0.3)',
      'rgba(199, 125, 255, 0.3)',
      'rgba(160, 196, 255, 0.3)',
      'rgba(255, 214, 165, 0.3)',
      'rgba(107, 255, 194, 0.3)'
    ];
    
    memoryDiv.style.cssText = `
      background: ${colors[Math.floor(Math.random() * colors.length)]};
      left: ${Math.random() * 80}%;
      top: ${Math.random() * 80}%;
      transform: rotate(${Math.random() * 20 - 10}deg);
      z-index: ${Math.floor(Math.random() * 10)};
    `;
    
    makeDraggable(memoryDiv);
    document.getElementById('jar').appendChild(memoryDiv);
    memoryInput.value = '';
    
    // Celebration effect
    const heart = document.createElement('div');
    heart.innerHTML = 'üíñ';
    heart.style.cssText = `
      position: absolute;
      font-size: 30px;
      animation: floatUp 1.5s forwards;
      pointer-events: none;
    `;
    memoryDiv.appendChild(heart);
    setTimeout(() => heart.remove(), 1500);
  }
}

function makeDraggable(element) {
  let pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
  
  element.onmousedown = dragMouseDown;
  
  function dragMouseDown(e) {
    e = e || window.event;
    e.preventDefault();
    pos3 = e.clientX;
    pos4 = e.clientY;
    document.onmouseup = closeDragElement;
    document.onmousemove = elementDrag;
    element.style.zIndex = "1000";
  }
  
  function elementDrag(e) {
    e = e || window.event;
    e.preventDefault();
    pos1 = pos3 - e.clientX;
    pos2 = pos4 - e.clientY;
    pos3 = e.clientX;
    pos4 = e.clientY;
    element.style.top = (element.offsetTop - pos2) + "px";
    element.style.left = (element.offsetLeft - pos1) + "px";
  }
  
  function closeDragElement() {
    document.onmouseup = null;
    document.onmousemove = null;
    element.style.zIndex = Math.floor(Math.random() * 10);
  }
}

// =========== TYPEWRITER EFFECT ===========
const text = `It's a strange kind of grief... the kind where no one died,
but you still wear mourning in your chest.

The deepest heartbreaks aren't caused by words unsaid...
but by the moments we believed would happen, and never did.

Some meetings feel ordinary until time reveals
they were final chapters in disguise.

Truth is ‚Äî I wasn't rude. I was just scared.
Scared... because I was starting to care too much.

Neend aayegi to is kadar soyenge...
Ki tumhare khwabon ke siwa kuch yaad na rahega.

But here's what I never told you:
Every memory with you feels like a favorite song - 
one I play on repeat even when it hurts.

We were like two stars that crossed paths for a moment,
lighting up each other's darkness before continuing on our separate ways.

Maybe some stories aren't meant to have happy endings.
Maybe their purpose is just to leave a mark on our souls.

And you left a mark on mine that will never fade.
No matter where life takes us, I'll carry a piece of you with me.

Thank you for the memories, the laughter, the late-night talks.
Thank you for showing me what it means to care deeply.
Thank you for every smile, every tear, every moment.
Thank you for being you.

Even if this is our final goodbye,
know that somewhere in this vast universe,
there's a heart that still beats to the rhythm of your memory.

With all the love I never got to show,
and all the words I never got to say...`;

let charIndex = 0;
function type() {
  if(charIndex < text.length) {
    document.getElementById('typeText').textContent += text.charAt(charIndex);
    charIndex++;
    setTimeout(type, 30);
  }
}

// =========== BURN LETTER EFFECT ===========
function createBurnEffect() {
  const burnBtn = document.getElementById('burnBtn');
  burnBtn.onclick = function() {
    this.disabled = true;
    this.innerHTML = 'Burning Memories... üî•';
    this.style.opacity = '0.7';
    
    // Create fire particles
    for(let i = 0; i < 40; i++) {
      setTimeout(() => {
        const fire = document.createElement('div');
        fire.style.cssText = `
          position: fixed;
          width: ${Math.random() * 30 + 10}px;
          height: ${Math.random() * 30 + 10}px;
          background: radial-gradient(circle, #ff8a00, #ff0000);
          border-radius: 50%;
          pointer-events: none;
          z-index: 1000;
          left: ${Math.random() * 100}%;
          top: ${Math.random() * 100}%;
          animation: fall ${Math.random() * 2 + 1}s linear forwards;
          opacity: 0.8;
        `;
        document.body.appendChild(fire);
        setTimeout(() => fire.remove(), 2000);
      }, i * 50);
    }
    
    // Fade letter
    setTimeout(() => {
      document.querySelector('.letter').style.opacity = '0.5';
      document.querySelector('.letter').style.filter = 'blur(3px) grayscale(50%)';
      burnBtn.innerHTML = 'Memories Released üí®';
      burnBtn.style.background = 'linear-gradient(to right, #36d1dc, #5b86e5)';
    }, 1500);
    
    // Secret message after burn
    setTimeout(() => {
      showSecretMessage("Some feelings are meant to be released, not carried forever.");
    }, 2500);
  };
}

// =========== VOICE MESSAGE ===========
function playVoiceMessage() {
  // For demo, we'll use a placeholder
  // In real use, replace with your actual voice recording URL
  const audio = new Audio('someone.mp3');
  audio.play();
  
  const waveform = document.getElementById('waveform');
  waveform.innerHTML = '';
  
  for(let i = 0; i < 25; i++) {
    const bar = document.createElement('div');
    bar.className = 'wave-bar';
    bar.style.cssText = `
      animation: wave ${Math.random() * 0.5 + 0.8}s ease-in-out ${i * 0.05}s infinite alternate;
      height: ${Math.random() * 40 + 10}px;
    `;
    waveform.appendChild(bar);
  }
  
  // Show message after "playing"
  setTimeout(() => {
    showSecretMessage("I wish I could tell you all this in person...");
  }, 2000);
}

// =========== REACTIONS ===========
function react(emoji) {
  const messages = {
    'üò¢': "I know... me too. But some tears are worth shedding for beautiful memories.",
    '‚ù§Ô∏è': "You'll always have a piece of my heart, no matter where life takes us.",
    'ü§ó': "Wishing I could give you one last hug that says everything words can't.",
    'üòî': "Nostalgia is a beautiful pain, isn't it? Remembering what was...",
    'üí≠': "You're in my thoughts more often than you'll ever know.",
    '‚ú®': "Even in goodbye, there's hope for beautiful new beginnings."
  };
  
  const reactionDiv = document.getElementById('reactionMessage');
  reactionDiv.innerHTML = `
    <div style="padding: 20px; background: rgba(255,255,255,0.08); border-radius: 15px; margin-top: 20px;">
      <div style="font-size: 2rem; margin-bottom: 10px;">${emoji}</div>
      <div style="font-size: 1.1rem; color: rgba(255,255,255,0.9);">${messages[emoji]}</div>
    </div>
  `;
  
  // Create floating emoji
  const floatEmoji = document.createElement('div');
  floatEmoji.innerHTML = emoji;
  floatEmoji.style.cssText = `
    position: fixed;
    font-size: 40px;
    left: ${Math.random() * 80 + 10}%;
    top: 80%;
    animation: floatUp 3s forwards;
    pointer-events: none;
    z-index: 1000;
  `;
  document.body.appendChild(floatEmoji);
  setTimeout(() => floatEmoji.remove(), 3000);
}

// =========== SECRET MESSAGES ===========
function showSecretMessage(message) {
  const secret = document.createElement('div');
  secret.className = 'secret-message';
  secret.innerHTML = message;
  secret.style.left = `${Math.random() * 70 + 15}%`;
  secret.style.top = `${Math.random() * 70 + 15}%`;
  document.body.appendChild(secret);
  setTimeout(() => secret.remove(), 2000);
}

// Random secret messages on click
document.addEventListener('click', function(e) {
  if(Math.random() > 0.95 && e.target.id !== 'pwd') {
    const secrets = [
      "I still remember your laugh.",
      "You made me believe in magic.",
      "I wish things were different.",
      "Thank you for everything.",
      "You're unforgettable.",
      "Our time was my favorite story.",
      "I miss our conversations.",
      "You changed me for the better."
    ];
    showSecretMessage(secrets[Math.floor(Math.random() * secrets.length)]);
  }
});

// =========== TIMELINE INTERACTION ===========
function showMemoryDetails(memoryId) {
  const details = {
    firstMeet: "That day in college when our eyes met across the room... I knew something special was beginning.",
    firstDate: "You were nervous, I was nervous. But the moment you smiled, everything felt right.",
    birthday: "Seeing your face light up when you saw the surprise... that's a memory I'll treasure forever.",
    lastMeet: "The words we didn't say spoke louder than the ones we did. Some goodbyes don't need words."
  };
  
  showSecretMessage(details[memoryId]);
}

// =========== MUSIC PLAYER ===========
let isPlaying = false;
function toggleMusic() {
  const bgm = document.getElementById('bgm');
  const playBtn = document.getElementById('playBtn');
  
  if (isPlaying) {
    bgm.pause();
    playBtn.innerHTML = '<i class="fas fa-play"></i>';
  } else {
    bgm.play();
    playBtn.innerHTML = '<i class="fas fa-pause"></i>';
  }
  
  isPlaying = !isPlaying;
}

// =========== EXPORT FUNCTION ===========
function exportAsMemoryCard() {
  const exportBtn = document.querySelector('.export-btn');
  exportBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Creating Memory Card...';
  exportBtn.disabled = true;
  
  setTimeout(() => {
    html2canvas(document.querySelector('.container')).then(canvas => {
      const link = document.createElement('a');
      link.download = 'Our-Memory-Card.png';
      link.href = canvas.toDataURL();
      link.click();
      
      exportBtn.innerHTML = '<i class="fas fa-download"></i> Save as Memory Card';
      exportBtn.disabled = false;
      
      showSecretMessage("Memory card saved! üíù");
    });
  }, 1000);
}

// =========== SCROLL REVEAL ===========
const reveals = document.querySelectorAll('.reveal');
window.addEventListener('scroll', () => {
  reveals.forEach(r => {
    const top = r.getBoundingClientRect().top;
    if(top < window.innerHeight - 100) r.classList.add('active');
  });
});

// =========== IMAGE LIGHTBOX ===========
function openLightbox(element) {
  const imgSrc = element.querySelector('img').src;
  const caption = element.querySelector('.caption') ? element.querySelector('.caption').textContent : '';
  
  const lightbox = document.createElement('div');
  lightbox.style.cssText = `
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.95);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 10000;
    cursor: pointer;
    flex-direction: column;
  `;
  
  lightbox.innerHTML = `
    <img src="${imgSrc}" style="max-width: 90%; max-height: 70%; border-radius: 10px;">
    ${caption ? `<div style="color: white; margin-top: 20px; font-size: 1.2rem;">${caption}</div>` : ''}
    <div style="color: rgba(255,255,255,0.5); margin-top: 10px;">Click anywhere to close</div>
  `;
  
  lightbox.onclick = () => document.body.removeChild(lightbox);
  document.body.appendChild(lightbox);
}
</script>

</body>
</html>